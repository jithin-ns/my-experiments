Good catch ğŸ‘Œ â€” and this is a version misunderstanding, not an npm issue.

There is no separate package called @pnp/spfx in the registry anymore in modern PnP v3+.

That package existed in older versions.


---

âœ… Correct Packages for Modern SPFx (PnP v3+)

You only need:

npm install @pnp/sp --save

Thatâ€™s it.

You do NOT install @pnp/spfx separately.


---

ğŸ”¹ Why the Confusion?

Older documentation used:

@pnp/sp
@pnp/spfx

In modern PnP (v3+):

SPFx integration is built into @pnp/sp

You just import SPFx from @pnp/sp



---

âœ… Correct Modern Setup (Working Code)


---

1ï¸âƒ£ Install

npm install @pnp/sp


---

2ï¸âƒ£ Configure in Web Part

// YourWebPart.ts

import { spfi, SPFx } from "@pnp/sp";
import "@pnp/sp/webs";
import "@pnp/sp/lists";
import "@pnp/sp/items";

private _sp;

protected onInit(): Promise<void> {
  return super.onInit().then(() => {
    this._sp = spfi().using(SPFx(this.context));
  });
}

Thatâ€™s it. No @pnp/spfx package required.


---

3ï¸âƒ£ React Component Usage

Same as I shared earlier:

const items = await sp.web.lists
  .getByTitle("Test Users")
  .items();


---

ğŸ”¥ If You Still See Errors

Run:

npm list @pnp/sp

Make sure version is:

3.x.x

If not, update:

npm install @pnp/sp@latest


---

ğŸ¯ Summary

Old Docs	Modern Setup

@pnp/spfx	âŒ Not needed
@pnp/sp	âœ… Required
SPFx(this.context)	âœ… Still used



---

Youâ€™re not doing anything wrong â€” just encountering outdated tutorials.

If you'd like, I can give you a clean minimal SPFx + PnP starter template structure so you don't run into version conflicts again.
